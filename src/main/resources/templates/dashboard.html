<!DOCTYPE html>
<html lang="pt-br" xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{fragments/_head :: head('Dashboard • SafeYard')}"></head>
<body class="bg-light">

<nav th:replace="~{fragments/_navbar :: navbar('dashboard')}"></nav>

<main class="container py-4">
    <h1 class="h4 mb-3">
        Bem-vindo(a), <span th:text="${username} ?: 'Usuário'">Usuário</span>!
    </h1>

    <div th:if="${msg}" class="alert alert-success" th:text="${msg}">Ok</div>
    <div th:if="${error}" class="alert alert-danger" th:text="${error}">Erro</div>

    <div class="row g-3">

        <!-- Clientes: ADMIN ou FUNCIONARIO -->
        <div class="col-md-4" th:if="${role} == 'ADMIN' or ${role} == 'FUNCIONARIO'">
            <div class="card shadow-sm h-100">
                <div class="card-body">
                    <h2 class="h6 d-flex align-items-center justify-content-between">
                        Clientes
                        <span class="badge bg-secondary" th:text="${totalClientes} ?: 0">0</span>
                    </h2>
                    <p class="text-muted mb-3">Resumo rápido de clientes.</p>
                    <a class="btn btn-sm btn-primary" th:href="@{/clientes}">Ver clientes</a>
                </div>
            </div>
        </div>

        <!-- Motos: ADMIN ou FUNCIONARIO -->
        <div class="col-md-4" th:if="${role} == 'ADMIN' or ${role} == 'FUNCIONARIO'">
            <div class="card shadow-sm h-100">
                <div class="card-body">
                    <h2 class="h6 d-flex align-items-center justify-content-between">
                        Motos
                        <span class="badge bg-secondary" th:text="${totalMotos} ?: 0">0</span>
                    </h2>
                    <p class="text-muted mb-3">Status da frota e disponibilidade.</p>
                    <a class="btn btn-sm btn-primary" th:href="@{/motos}">Ver motos</a>
                </div>
            </div>
        </div>

        <!-- Relatórios: só ADMIN -->
        <div class="col-md-4" th:if="${role} == 'ADMIN'">
            <div class="card shadow-sm h-100">
                <div class="card-body">
                    <h2 class="h6">Relatórios</h2>
                    <p class="text-muted mb-3">Indicadores e métricas.</p>
                    <a class="btn btn-sm btn-primary" th:href="@{/relatorios}">Abrir relatórios</a>
                </div>
            </div>
        </div>

        <!-- Minha área: só CLIENTE -->
        <div class="col-md-4" th:if="${role} == 'CLIENTE'">
            <div class="card shadow-sm h-100">
                <div class="card-body">
                    <h2 class="h6">Minha área</h2>
                    <p class="text-muted mb-3">Acompanhe suas locações e solicite novas.</p>
                    <a class="btn btn-sm btn-outline-primary" th:href="@{/cliente/area}">Abrir</a>
                </div>
            </div>
        </div>

        <!-- Locações: ADMIN ou FUNCIONARIO -->
        <div class="col-md-4" th:if="${role} == 'ADMIN' or ${role} == 'FUNCIONARIO'">
            <div class="card shadow-sm h-100">
                <div class="card-body">
                    <h2 class="h6 d-flex align-items-center justify-content-between">
                        Locações
                        <span class="badge bg-secondary" th:text="${totalLocacoes} ?: 0">0</span>
                    </h2>
                    <p class="text-muted mb-3">Listagem, filtros e detalhes de locações.</p>
                    <a class="btn btn-sm btn-primary" th:href="@{/locacoes}">Ver locações</a>
                </div>
            </div>
        </div>

    </div>
</main>

<footer th:insert="~{fragments/_footer :: footer}"></footer>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
</body>
</html>
